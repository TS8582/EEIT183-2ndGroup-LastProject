<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>討論串資料</title>

    <!-- Include DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">

    <!-- Include jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- Include DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>

    <style>
        body {
            background-image: url("[[@{/images/loginBG.jpg}]]");
            background-size: cover;
            /* 確保圖片覆蓋整個容器 */
            background-position: center;
            /* 確保圖片居中 */
            background-repeat: no-repeat;
            /* 防止圖片重複 */
        }

        .t1 {
            margin-left: 3.5%;
            padding: 0px;
            width: 100%;
        }

        .container {
            background-color: white;
        }

        .description {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
</head>

<body class="h-screen flex flex-col w-screen">
    <div th:replace="~{/layout/backen_nav}"></div>

    <div th:replace="~{/forum/layout/navbar}"></div>

    <div>
        <section id="Wishlist" class="py-5 my-5">

            <div id="layoutSidenav_content">
                <main>
                    <div class="container">
                        <form method="post" th:action="@{/findAllForum2}">
                            <table id="myTable" class="display cell-border stripe nowrap t1">
                                <thead>
                                    <tr>
                                        <th>討論串Id</th>
                                        <th>討論串名稱</th>
                                        <th>討論串介紹</th>
                                        <th>修改</th>
                                        <th>刪除</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="forumBean: ${arrayList}">
                                        <td th:text="${forumBean.forumId}"></td>

                                        <td th:text="${forumBean.forumName}"></td>

                                        <td>
                                            <p class="blog-paragraph fs-6 description"
                                                th:utext="${forumBean.textsIntro}"></p>
                                        </td>

                                        <td>
                                            <a th:href="@{/updateByForumId(forumId=${forumBean.forumId})}">修改</a>
                                        </td>
                                        <td>
                                            <a class="delete" th:href="@{/deleteForum(forumId=${forumBean.forumId})}"
                                                onclick="return confirm('你確定要刪除這個主題嗎？');">刪除</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </form>
                    </div>
                </main>
            </div>

        </section>
    </div>
    <script>
        $(document).ready(function () {
            $('#toggleStatus').click(function () {
                $.ajax({
                    url: '/updateStatus',
                    method: 'POST',
                    data: {
                        // 假設您需要傳遞一些數據，例如當前狀態
                        currentStatus: $('#status').text()
                    },
                    success: function (response) {
                        // 更新狀態文字
                        $('#status').text(response.newStatus);
                    },
                    error: function () {
                        alert('更新狀態失敗');
                    }
                });
            });
        });
        $(document).ready(function () {
            $('#myTable').DataTable({
                "language": {
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "paginate": {
                        "first": "第一頁",
                        "previous": "上一頁",
                        "next": "下一頁",
                        "last": "最後一頁"
                    },
                    "emptyTable": "目前沒有資料",
                    "zeroRecords": "沒有符合的資料",
                    "info": "顯示第 _START_ 至 _END_ 筆結果，共 _TOTAL_ 筆",
                    "infoEmpty": "顯示第 0 至 0 筆結果，共 0 筆",
                    "infoFiltered": "(從 _MAX_ 筆結果中篩選)",
                    "search": "搜尋：",
                    "searchPlaceholder": "請輸入關鍵字",
                    "lengthMenu": "顯示 _MENU_ 筆結果",
                    "loadingRecords": "載入中...",
                    "processing": "處理中...",
                    "aria": {
                        "sortAscending": "：升冪排列",
                        "sortDescending": "：降冪排列"
                    }
                }
            });
        });
    </script>
</body>

</html>